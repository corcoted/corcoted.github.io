<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Theodore A. Corcovilos">
<meta name="dcterms.date" content="2018-03-08">

<title>Corcovilos Lab - Lead in Drinking Water, Part 1 (Background)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-114117860-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Corcovilos Lab</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html" rel="" target="">
 <span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../teaching.html" rel="" target="">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html" rel="" target="">
 <span class="menu-text">Blog Posts</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto tools-wide">
    <a href="https://twitter.com/TedCorcovilos" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/corcoted" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/ted-corcovilos" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-lead" id="toc-what-is-lead" class="nav-link active" data-scroll-target="#what-is-lead">What is Lead?</a></li>
  <li><a href="#lead-is-bad" id="toc-lead-is-bad" class="nav-link" data-scroll-target="#lead-is-bad">Lead is bad</a></li>
  <li><a href="#lead-is-here" id="toc-lead-is-here" class="nav-link" data-scroll-target="#lead-is-here">Lead is here</a></li>
  <li><a href="#what-my-group-is-doing-about-lead" id="toc-what-my-group-is-doing-about-lead" class="nav-link" data-scroll-target="#what-my-group-is-doing-about-lead">What my group is doing about lead</a>
  <ul class="collapse">
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lead in Drinking Water, Part 1 (Background)</h1>
  <div class="quarto-categories">
    <div class="quarto-category">research</div>
    <div class="quarto-category">lead</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Theodore A. Corcovilos </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="www.duq.edu">
            Duquesne University
            </a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 8, 2018</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    One of my major research projects is building an inexpensive handheld device for measuring the amount of lead in drinking water. This is the first of several planned posts on the project. Today, I’d like to introduce the problem we’re trying to solve and talk particularly about lead in Pittsburgh’s drinking water.
  </div>
</div>

</header>

<p>One of my major <a href="../research.html">research projects</a> is building an inexpensive handheld device for measuring the amount of lead in drinking water. This is the first of several planned posts on the project. Today, I’d like to introduce the problem we’re trying to solve and talk particularly about lead in Pittsburgh’s drinking water. Part 2 will talk about some of the ethical and legal issues regarding the lead testing (at least as far as I understand them), and Part 3 will be about the device itself. My intention is to keep this a “living” post, and update it as new information and results develop.</p>
<section id="what-is-lead" class="level2">
<h2 class="anchored" data-anchor-id="what-is-lead">What is Lead?</h2>
<p>Let’s start at the very basic level. <a href="https://en.wikipedia.org/wiki/Lead">Lead</a> is a metallic chemical element with an atomic number of 82 and its most common isotope has an atomic mass of 208. From a physics perspective, lead is interesting because it is the heaviest stable element. Lead-208 has a doubly <a href="https://en.wikipedia.org/wiki/Magic_number_(physics)">magic nucleus</a>; it and the other stable isotopes of lead form the termination of the nuclear <a href="https://en.wikipedia.org/wiki/Decay_chain">decay chains</a> for almost all of the heavier elements.</p>
<p>From a technological point of view, lead was useful because it is soft and has a low melting point (327 °C). This made it easy to form, which may be why the ancient Romans used it for pipes (“Plumbing” and the chemical symbol Pb derive from the Latin word for lead), and the metal itself was cheap and common, being a waste product of silver refining. In more recent times, it was used as solder to bond copper pipes and wires. Lead is also extremely dense (11 g/cm<sup>3</sup>), which is why it was used for fishing sinkers, bullets, and ballast. Copper and brass is often alloyed with lead to make it more machineable.</p>
<p>Chemically, lead is a member of the carbon group (Group 14) in the periodic table. Its most common oxidation states are +2 and +4. Lead(II) carbonate and lead(II,IV) oxide were commonly used as pigments (white and red, resp.) until they were banned in the 1970s. Tetraethyllead was used as a gasoline additive until it was phased-out beginning in 1975 and ending in 1995 in the U.S. Lead compounds (particularly lead(II) acetate) have a sweet taste, making them a common food adulterant going back as far as ancient Rome and continuing illicitly today.</p>
</section>
<section id="lead-is-bad" class="level2">
<h2 class="anchored" data-anchor-id="lead-is-bad">Lead is bad</h2>
<p>The health effects of lead were suspected as early as the Roman days and began to be taken seriously as early as the late 1800’s. Today the largest concern is the effect of lead exposure to children.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../assets/figs/BLL2015.png" class="img-fluid figure-img" data-alt-text="Blood lead levels map 2015"></p>
<figcaption class="figure-caption">Percentage of children under 6 years of age who had blood lead levels &gt; 10μg/dL in 2015.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></figcaption>
</figure>
</div>
<p>The Centers for Disease Control and Prevention (CDC) rank lead as the most common environmental toxin and the second highest priority among toxic substances, behind arsenic<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. Children exposed to lead exhibit long lasting physiological, mental, and behavioral problems such as lower IQ, ADHD<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, and lower school performance<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. One of the most frustrating aspects about the response to lead exposure in the U.S. is that mandatory remediation of lead in homes is only done after a child or pregnant woman tests positive for elevated blood lead levels (&gt;5μg/dL). In my opinion, this is clearly too late as damage has already been done. This was the case in <a href="https://en.wikipedia.org/wiki/Flint_water_crisis">Flint, MI</a>. The first indication of a problem in the city’s water was when pediatricians noticed a sudden increase in positive blood tests for lead in toddlers.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> Only after this was the water suspected. Testing should be done to help <em>prevent</em> exposure, not diagnose it after it occurs.</p>
<p>Lead poisoning in children is caused almost exclusively by ingestion. Toddlers in particular, will stick anything into their mouths. The most common sources of lead exposure in children are * Lead paint in homes built before 1978 * Lead pipes in homes built before 1950 * Lead in soil, caused by burning of leaded gasoline before 1986 and industrial waste.</p>
<p>While it is believed that lead paint is still the largest contributor to childhood lead poisoning<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>, several recent, high-profile cases, including the discovery of high lead levels in the domestic water supplies of <a href="https://en.wikipedia.org/wiki/Lead_contamination_in_Washington,_D.C._drinking_water">Washington, DC in 2001</a> and <a href="https://en.wikipedia.org/wiki/Flint_water_crisis">Flint, MI in 2014</a>, have motivated our effort to rapidly and reliably measure lead concentration in home drinking water. As shown in the 2015 blood test data<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> (see figure inset above), Pennsylvania ranks worst among U.S. states in lead exposure. Additionally, several municipalities in Pennsylvania, including the City of Pittsburgh, show elevated lead in domestic drinking water during EPA-mandated periodic testing, above the EPA action limit of 15 parts per billion (ppb) by weight for 10% or more of the homes tested.</p>
</section>
<section id="lead-is-here" class="level2">
<h2 class="anchored" data-anchor-id="lead-is-here">Lead is here</h2>
<p>Pennsylvania, and Pittsburgh in particular, are at risk for home lead exposure because of the age of the houses. This is demonstrated nicely in the figure below.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../assets/figs/2014 PA 1950 Homes.svg" class="img-fluid figure-img" data-alt-text="Map of homes built before 1950 in Pennsylvania"></p>
<figcaption class="figure-caption">Percentage of homes built before 1950, when lead pipes were banned, by 2010 U.S. Census tract. Source: PA Dept. of Health, 2014.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></figcaption>
</figure>
</div>
<p>Most recently, elevated levels of lead in drinking water were found at home testing sites in Pittsburgh in June 2016 (90th percentile reading of 22 ppb)<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> and December 2016 (90th percentile reading of 18 ppb)<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>. Water leaving treatment facilities shows no detectable level of lead. The major source of lead in drinking water is from downstream plumbing, such as lead service lines and lead solder and fixtures inside homes. An internal audit by the city showed that no record exists of where city-owned lead service lines are located, although preliminary efforts to survey the city for lead services lines have begun<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>. The leaching of lead into the water supply can be moderated by proper chemical buffering of the water at the treatment plant, but the optimal buffer chemistry has not yet been determined. A voluntary screening program by the city, which gives residents the opportunity to submit their own water samples for testing, showed 12% of the volunteer samples to be above the 15 ppb EPA limit as of February 2017, with the volunteer samples coming disproportionately from higher-income neighborhoods – these results likely underestimate the city-wide average. However, the city has not been able to keep up with the demand to test water samples: only 396 of the 1,076 samples have been analyzed as of February 2017. Of note, the volunteer testing showed no geographic correlation of the measured lead level: houses in the same neighborhood, or even on the same block, showed widely varying lead levels. Therefore, each and every home must be tested individually. This emphasizes the need for low-cost and rapid screening methods and tools, with sufficient reliability and limits of detection. Currently, there is no method that will allow rapid measurements, on site, specific to lead and sensitive down to the EPA mandated action level of 15 ppm. Our work fulfills this need.</p>
</section>
<section id="what-my-group-is-doing-about-lead" class="level2">
<h2 class="anchored" data-anchor-id="what-my-group-is-doing-about-lead">What my group is doing about lead</h2>
<p>Our interest is to detect a common source of lead in homes: domestic drinking water. We’ve developed a system to do this on-site and in real time with an inexpensive, portable device. I’ll hold off in discussing that, because before we charge in and start testing homes, we have to consider what our desired final outcomes from the testing will be. That’s the discussion for Part 2 of this series.</p>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References</h3>
<p>The bulk of the information here came from the Wikipedia page on <a href="https://en.wikipedia.org/wiki/Lead">lead</a> and links therein. Other, more specific or technical references are listed here.</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Centers for Disease Control and Prevention. 2017. “CDC’s National Surveillance Data (1997-2015)” <a href="https://www.cdc.gov/nceh/lead/data/national.htm">https://www.cdc.gov/nceh/lead/data/national.htm</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Agency for Toxic Substances and Disease Registry. 2015. “The Priority List of Hazardous Substances That Will Be the Candidates for Toxicological Profiles.” <a href="https://www.atsdr.cdc.gov/SPL/index.html">https://www.atsdr.cdc.gov/SPL/index.html</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Etzel, R. A., and S. J. Balk, eds.&nbsp;2003. <em>Pediatric Environmental Health</em>. 2nd ed.&nbsp;Elk Grove Village: American Academy of Pediatrics.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Evens, Anne, Daniel Hryhorczuk, Bruce P. Lanphear, Kristin M. Rankin, Dan A. Lewis, Linda Forst, and Deborah Rosenberg. 2015. “The Impact of Low-Level Lead Toxicity on School Performance among Children in the Chicago Public Schools: A Population-Based Retrospective Cohort Study.” <em>Environmental Health: A Global Access Science Source</em> 14 (April): 21. doi:<a href="http://doi.org/10.1186/s12940-015-0008-9">10.1186/s12940-015-0008-9</a>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Hanna-Attisha, Mona; LaChance, Jenny; Sadler, Richard Casey; Champney Schnepp, Allison. 2015. “Elevated Blood Lead Levels in Children Associated With the Flint Drinking Water Crisis: A Spatial Analysis of Risk and Public Health Response”. <em>American Journal of Public Health</em>. 106 (2): 283–290. doi:<a href="http://doi.org/10.2105/AJPH.2015.303003">10.2105/AJPH.2015.303003</a>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Centers for Disease Control and Prevention. 2005. <em>Preventing Lead Poisoning in Young Children</em>. Atlanta: CDC. <a href="https://www.cdc.gov/nceh/lead/publications/prevleadpoisoning.pdf">Link to PDF</a>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Centers for Disease Control and Prevention. 2017. “CDC’s National Surveillance Data (1997-2015)” <a href="https://www.cdc.gov/nceh/lead/data/national.htm">https://www.cdc.gov/nceh/lead/data/national.htm</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Pennsylvania Department of Health. 2014. <em>2014 Childhood Lead Surveillence Annual Report</em>. [Deadlink]. <!-- (http://www.health.pa.gov/My%20Health/Infant%20and%20Childrens%20Health/Lead%20Poisoning%20Prevention%20and%20Control/Documents/2014%20Lead%20Surveillance%20Annual%20Report%20r2.pdf) --><a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Lamb, Michael. 2017. “Performance Audit: Pittsburgh Water and Sewer Authority.” City of Pittsburgh. <a href="http://apps.pittsburghpa.gov/co/Draft_Pittsburgh_Water_and_Sewer_Authority_February_2017.pdf">Link to PDF</a>.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>“PWSA Releases December 2016 Lead Compliance Test Results.” 2017. Pittsburgh Water and Sewer Authority. January 19, 2017. [Deadlink]. <!-- (http://pgh2o.com/release?id=6912) --><a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>Lamb, Michael. 2017. “Performance Audit: Pittsburgh Water and Sewer Authority.” City of Pittsburgh. <a href="http://apps.pittsburghpa.gov/co/Draft_Pittsburgh_Water_and_Sewer_Authority_February_2017.pdf">Link to PDF</a>.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Copyright 2023, Ted Corcovilos</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>